import { useState} from 'react';
import './CameraControlPanel.css';

export interface ControlsRef {
    resetAndFit: (transition: boolean) => void
}

interface CameraControlPanelProps {
    controlsRef: React.RefObject<any>;
    modelRef: React.RefObject<any>;
  }

export function CameraControlPanel({ controlsRef, modelRef }: CameraControlPanelProps) {
    const [rotateToggle, setRotateToggle] = useState(true);

    function resetAndFit(transition: boolean) {
        controlsRef.current.setLookAt(0, 0, 1, 0, 0, 0, transition);
        if (modelRef.current.getBoundingSphere()) {
            controlsRef.current.fitToSphere(modelRef.current.getBoundingSphere(), transition);
        }
    }

    const clickedUp = () => {
        if (rotateToggle) {
            controlsRef.current.rotate(0, -0.5, true);
        }
        else {
            controlsRef.current.truck(0, -0.5, true);
        }
    }

    const clickedDown = () => {
        if (rotateToggle) {
            controlsRef.current.rotate(0, 0.5, true);
        }
        else {
            controlsRef.current.truck(0, 0.5, true);
        }

    }

    const clickedLeft = () => {
        if (rotateToggle) {
            controlsRef.current.rotate(-0.5, 0, true);
        }
        else {
            controlsRef.current.truck(-0.5, 0, true);
        }

    }

    const clickedRight = () => {
        if (rotateToggle) {
            controlsRef.current.rotate(0.5, 0, true);
        }
        else {
            controlsRef.current.truck(0.5, 0, true);
        }

    }

    const clickedReset = () => {
        resetAndFit(true);
    }

    const clickedPanRotateToggle = () => {
        setRotateToggle(!rotateToggle);
    }

    const clickedZoomOut = () => {
        controlsRef.current.dolly(-1, true)
    };

    const clickedZoomIn = () => {
        controlsRef.current.dolly(1, true)
    };

    return (
        <div className="controls">
            <svg xmlns="http://www.w3.org/2000/svg" width="122" height="148" viewBox="0 0 122 148" version="1.1">
                <g className="area-item" onClick={clickedZoomOut}>
                    <path
                        d="m 30.752,60.787 a 30.248,30 0 0 0 30.248,30 30.248,30 0 0 0 30.248,-30 z"
                        strokeWidth="9.233"
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        id="path1">
                        <title id="title1">Zoom out</title>
                    </path>
                    <g transform="matrix(1.00826,0,0,0.99997,-8696.735,2858.407)" className="btn-icon">
                        <path
                            d="m 8680.8,-2784.7 h 10.3 v 1.7 h -10.3 z"
                            id="path2" />
                        <title id="title2">Zoom out</title>
                    </g>
                </g>
                <g className="area-item" onClick={clickedZoomIn}>
                    <path
                        d="m 60.854,30.788 a 30.248,30 0 0 0 -30.102,30 h 60.496 a 30.248,30 0 0 0 -30.248,-30 30.248,30 0 0 0 -0.146,0 z"
                        strokeWidth="9.233"
                        strokeLinecap="round"
                        strokeLinejoin="round">
                        <title id="title3">Zoom in</title>
                    </path>
                    <g transform="matrix(1.00826,0,0,0.99997,-8696.785,2859.107)" className="btn-icon">
                        <path
                            d="m 8686.9,-2806 h -1.9 v -4.6 h -4.5 v -1.8 h 4.5 v -4.6 h 1.9 v 4.6 h 4.6 v 1.8 h -4.6 z" />
                        <title id="title4">Zoom in</title>
                    </g>
                </g>
                <g className="area-item" onClick={clickedLeft}>
                    <path
                        d="m 18.224,18.363 a 60.496,59.998 0 0 0 -17.72,42.424 60.496,59.998 0 0 0 17.72,42.425 L 39.612,82 a 30.248,30 0 0 1 -8.86,-21.213 30.248,30 0 0 1 8.86,-21.212 z"
                        strokeWidth="3.143" strokeLinecap="round" strokeLinejoin="round" id="path5">
                        <title id="title5">{rotateToggle ? "Rotate left" : "Pan left"}</title>
                    </path>
                    <g transform="matrix(0,-0.99997,1.00826,0,12.502,67.312)" className="btn-icon">
                        <path
                            d="M 6.5,0.2 0.2,6.6 c -0.3,0.3 -0.3,0.7 0,0.9 L 0.6,8 C 0.9,8.3 1.3,8.3 1.5,8 L 7,2.4 12.5,8 c 0.3,0.3 0.7,0.3 0.9,0 l 0.4,-0.4 c 0.3,-0.3 0.3,-0.7 0,-0.9 L 7.5,0.2 c -0.3,-0.3 -0.7,-0.3 -1,0 z"
                            id="path6" />
                        <title id="title6">{rotateToggle ? "Rotate left" : "Pan left"}</title>
                    </g>
                </g>
                <g className="area-item" onClick={clickedUp}>
                    <path
                        d="M 61,0.79 A 60.496,59.998 0 0 0 18.224,18.363 l 21.388,21.212 a 30.248,30 0 0 1 21.242,-8.787 30.248,30 0 0 1 0.146,0 30.248,30 0 0 1 21.388,8.787 L 103.776,18.363 A 60.496,59.998 0 0 0 61,0.789 Z"
                        stroke="none" strokeWidth="1" strokeLinecap="butt" strokeLinejoin="miter" id="path7">
                        <title id="title7">{rotateToggle ? "Rotate up" : "Pan up"}</title>
                    </path>
                    <g transform="matrix(-1.00826,0,0,-0.99997,68.058,20.064)" className="btn-icon">
                        <path
                            d="M 6.5,8 0.2,1.5 C -0.1,1.2 -0.1,0.8 0.2,0.6 L 0.6,0.2 c 0.3,-0.3 0.7,-0.3 0.9,0 L 7,5.8 12.5,0.2 c 0.3,-0.3 0.7,-0.3 0.9,0 l 0.4,0.4 c 0.3,0.3 0.3,0.7 0,0.9 L 7.5,8 C 7.2,8.2 6.8,8.2 6.5,8 Z"
                            id="path8" />
                        <title id="title8">{rotateToggle ? "Rotate up" : "Pan up"}</title>
                    </g>
                </g>
                <g className="area-item" onClick={clickedDown}>
                    <path
                        d="M 39.612,82 18.224,103.212 A 60.496,59.998 0 0 0 61,120.786 60.496,59.998 0 0 0 103.776,103.212 L 82.388,82 A 30.248,30 0 0 1 61,90.787 30.248,30 0 0 1 39.612,82 Z"
                        stroke="none" strokeWidth="1" strokeLinecap="butt" strokeLinejoin="miter" id="path9">
                        <title id="title9">{rotateToggle ? "Rotate down" : "Pan down"}</title>
                    </path>
                    <g transform="matrix(-1.00826,0,0,-0.99997,68.058,109.011)" className="btn-icon">
                        <path
                            d="M 6.5,0.2 0.2,6.6 c -0.3,0.3 -0.3,0.7 0,0.9 L 0.6,8 C 0.9,8.3 1.3,8.3 1.5,8 L 7,2.4 12.5,8 c 0.3,0.3 0.7,0.3 0.9,0 l 0.4,-0.4 c 0.3,-0.3 0.3,-0.7 0,-0.9 L 7.5,0.2 c -0.3,-0.3 -0.7,-0.3 -1,0 z"
                            id="path10" />
                        <title id="title10">{rotateToggle ? "Rotate down" : "Pan down"}</title>
                    </g>
                </g>
                <g className="area-item" onClick={clickedRight}>
                    <path
                        d="M 103.776,18.363 82.388,39.575 A 30.248,30 0 0 1 91.248,60.787 30.248,30 0 0 1 82.388,82 l 21.388,21.212 a 60.496,59.998 0 0 0 17.72,-42.425 60.496,59.998 0 0 0 -17.72,-42.424 z"
                        strokeWidth="3.143"
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        id="path11">
                        <title id="title11">{rotateToggle ? "Rotate right" : "Pan right"}</title>
                    </path>
                    <g transform="matrix(0,-0.99997,1.00826,0,101.268,67.312)" className="btn-icon">
                        <path
                            d="M 6.5,8 0.2,1.5 C -0.1,1.2 -0.1,0.8 0.2,0.6 L 0.6,0.2 c 0.3,-0.3 0.7,-0.3 0.9,0 L 7,5.8 12.5,0.2 c 0.3,-0.3 0.7,-0.3 0.9,0 l 0.4,0.4 c 0.3,0.3 0.3,0.7 0,0.9 L 7.5,8 C 7.2,8.2 6.8,8.2 6.5,8 Z"
                            id="path12" />
                        <title id="title12">{rotateToggle ? "Rotate right" : "Pan right"}</title>
                    </g>
                </g>
                <g className="area-item" onClick={clickedPanRotateToggle}>
                    <path
                        d="M 103.776,103.212 C 92.43124,114.4639 77.044288,120.78544 61,120.786 v 26.215 h 36.51 c 3.471,0 6.266,-2.772 6.266,-6.215 v -31.359 z" strokeWidth="10" strokeLinecap="round" strokeLinejoin="round" id="path13">
                        <title id="title13">Select Rotate/Pan</title>
                    </path>
                    <g className='btn-icon fill'
                        transform="matrix(3.81076,0,0,3.77942,0.73428898,0.90514449)"
                    >
                        <g transform="matrix(0.265,0,0,0.265,19.345,31.27)" >
                            <path
                                d="M 7.473,3.333 0.972,5.771 A 1.5,1.5 0 0 0 0,7.178 v 7.036 a 1.5,1.5 0 0 0 0.828,1.341 L 7.33,18.8 a 1.49,1.49 0 0 0 1.341,0 l 6.5,-3.251 A 1.5,1.5 0 0 0 16,14.213 V 7.178 a 1.5,1.5 0 0 0 -0.972,-1.4 L 8.528,3.34 A 1.474,1.474 0 0 0 7.473,3.333 Z" />
                            <path className="btn-icon"
                                d="M 7.473,3.333 0.972,5.771 A 1.5,1.5 0 0 0 0,7.178 v 7.036 a 1.5,1.5 0 0 0 0.828,1.341 L 7.33,18.8 a 1.49,1.49 0 0 0 1.341,0 l 6.5,-3.251 A 1.5,1.5 0 0 0 16,14.213 V 7.178 a 1.5,1.5 0 0 0 -0.972,-1.4 L 8.528,3.34 A 1.474,1.474 0 0 0 7.473,3.333 Z M 8,4.205 15,6.831 V 6.84 L 8,9.875 1,6.84 V 6.831 Z M 1,7.931 7.5,10.747 V 17.77 L 1,14.52 Z M 8.5,17.77 V 10.747 L 15,7.931 v 6.592 z"
                                id="path15" />
                        </g>
                        <title id="title15">Select Rotate/Pan</title>
                    </g>
                    <g id="RotateIcon" className={rotateToggle ? 'btn-icon' : 'btn-icon hide'}>
                        <path id="path23"
                            d="m 68.544039,131.96642 c -0.08219,0.40174 -0.111866,0.5956 -0.147723,1.01305 -0.377452,4.4019 2.885025,8.33295 7.266117,8.74022 l -3.262751,1.51863 c -0.181679,0.0842 -0.27769,0.35116 -0.192622,0.53397 l 0.126755,0.27491 c 0.0851,0.18275 0.351832,0.28082 0.533143,0.19643 l 4.714209,-2.19374 c 0.181571,-0.0843 0.27769,-0.35115 0.192625,-0.53396 l -2.213102,-4.75432 c -0.0851,-0.18276 -0.34993,-0.28041 -0.531218,-0.19602 l -0.273024,0.12717 c -0.181669,0.0842 -0.277702,0.35115 -0.192618,0.53394 l 1.574793,3.38269 c -0.580939,-0.0632 -1.161529,-0.12719 -1.694374,-0.32392 -3.442469,-1.0546 -5.471853,-4.69887 -4.706739,-8.17455 0.0076,-0.0908 0.02153,-0.10516 0.009,-0.1999 -0.01821,-0.13589 -0.09467,-0.40118 -0.422785,-0.49633 -0.328088,-0.0951 -0.534192,0.007 -0.665141,0.23302 -0.05717,0.0908 -0.07952,0.17075 -0.07862,0.17092 z" />
                        <path id="path24"
                            d="m 96.804947,127.7817 c 0.0822,-0.40174 0.11187,-0.5956 0.14773,-1.01305 0.37745,-4.4019 -2.88503,-8.33295 -7.26612,-8.74022 l 3.26275,-1.51863 c 0.18168,-0.0842 0.27769,-0.35116 0.19262,-0.53397 l -0.12675,-0.27491 c -0.0851,-0.18275 -0.35184,-0.28082 -0.53315,-0.19643 l -4.71421,2.19374 c -0.18157,0.0843 -0.27769,0.35115 -0.19262,0.53396 l 2.2131,4.75432 c 0.0851,0.18276 0.34993,0.28041 0.53122,0.19602 l 0.27302,-0.12717 c 0.18167,-0.0842 0.27771,-0.35115 0.19262,-0.53394 l -1.57479,-3.38269 c 0.58094,0.0632 1.16153,0.12719 1.69437,0.32392 3.44247,1.0546 5.47186,4.69887 4.70674,8.17455 -0.008,0.0908 -0.0215,0.10516 -0.009,0.1999 0.0182,0.13589 0.0947,0.40118 0.42279,0.49633 0.32808,0.0951 0.53419,-0.007 0.66514,-0.23302 0.0572,-0.0908 0.0795,-0.17075 0.0786,-0.17092 z" />
                    </g>
                    <g id="PanIcon" className={rotateToggle ? 'btn-icon hide' : 'btn-icon'}>
                        <path id="path25"
                            d="m 96.081266,121.58418 c -0.12255,-0.006 -0.24071,0.0393 -0.33985,0.13477 -0.002,0.002 -0.007,0.005 -0.01,0.008 a 0.50199997,0.50199997 0 0 0 -0.0312,0.0273 c -0.0223,0.0188 -0.0453,0.0374 -0.0566,0.0547 l -0.002,0.002 -3.55274,3.57227 c -0.19948,0.19977 -0.20493,0.52776 -0.01,0.73242 0.11247,0.11882 0.27388,0.17576 0.43359,0.15234 0.10574,-0.0161 0.20518,-0.0655 0.28125,-0.14257 l 2.77148,-2.78516 0.0527,12.60547 -2.69922,-2.73438 c -0.19455,-0.19769 -0.51357,-0.20129 -0.71289,-0.008 -0.20004,0.19335 -0.2036,0.51108 -0.008,0.70899 l 3.55468,3.60351 c 0.0354,0.0346 0.0751,0.063 0.11914,0.0859 0.194,0.10509 0.40389,0.0844 0.5625,-0.0684 0.0247,-0.0245 0.0766,-0.0627 0.0957,-0.0918 l 0.002,-0.002 3.554694,-3.57227 c 0.19948,-0.19977 0.20298,-0.52776 0.008,-0.73242 -0.112474,-0.11882 -0.273884,-0.17576 -0.433594,-0.15234 -0.10574,0.0161 -0.20323,0.0675 -0.2793,0.14453 l -2.76172,2.77344 -0.0508,-12.58594 2.68555,2.72461 c 0.19455,0.19769 0.51357,0.20129 0.71289,0.008 0.200044,-0.19335 0.205554,-0.51107 0.01,-0.70898 l -3.55468,-3.60352 c -0.0354,-0.0346 -0.0771,-0.063 -0.1211,-0.0859 -0.0727,-0.0394 -0.14717,-0.0609 -0.2207,-0.0645 z" />
                        <path id="path26"
                            d="m 90.709911,141.55268 c 0.006,-0.12255 -0.0393,-0.24071 -0.13477,-0.33985 -0.002,-0.002 -0.005,-0.007 -0.008,-0.01 a 0.50199997,0.50199997 0 0 0 -0.0273,-0.0312 c -0.0188,-0.0223 -0.0374,-0.0453 -0.0547,-0.0566 l -0.002,-0.002 -3.57227,-3.55274 c -0.19977,-0.19948 -0.52776,-0.20493 -0.73242,-0.01 -0.11882,0.11247 -0.17576,0.27388 -0.15234,0.43359 0.0161,0.10574 0.0655,0.20518 0.14257,0.28125 l 2.78516,2.77148 -12.60547,0.0527 2.73438,-2.69922 c 0.19769,-0.19455 0.20129,-0.51357 0.008,-0.71289 -0.19335,-0.20004 -0.51108,-0.2036 -0.70899,-0.008 l -3.60351,3.55468 c -0.0346,0.0354 -0.063,0.0751 -0.0859,0.11914 -0.10509,0.194 -0.0844,0.40389 0.0684,0.5625 0.0245,0.0247 0.0627,0.0766 0.0918,0.0957 l 0.002,0.002 3.57227,3.55469 c 0.19977,0.19948 0.52776,0.20298 0.73242,0.008 0.11882,-0.11247 0.17576,-0.27388 0.15234,-0.43359 -0.0161,-0.10574 -0.0675,-0.20323 -0.14453,-0.2793 l -2.77344,-2.76172 12.58594,-0.0508 -2.72461,2.68555 c -0.19769,0.19455 -0.20129,0.51357 -0.008,0.71289 0.19335,0.20004 0.51107,0.20555 0.70898,0.01 l 3.60352,-3.55468 c 0.0346,-0.0354 0.063,-0.0771 0.0859,-0.1211 0.0394,-0.0727 0.0609,-0.14717 0.0645,-0.2207 z" />
                    </g>
                </g>
                <g className="area-item" onClick={clickedReset}>
                    <path
                        d="m 18.224,103.212 v 37.574 c 0,3.443 2.795,6.215 6.266,6.215 H 61 v -26.215 c -16.044288,-5.6e-4 -31.43124,-6.3221 -42.776,-17.574 z"
                        strokeWidth="10" strokeLinecap="round" strokeLinejoin="round" id="path17">
                        <title id="title17">Reset view</title>
                    </path>
                    <g className="btn-icon" >
                        <path
                            d="m 30.390012,122.45804 h 0.356924 c 0.237848,0 0.475798,0.236 0.475798,0.47189 v 4.24707 c 2.616838,-4.48296 8.445387,-6.01672 12.965517,-3.4212 4.52003,2.59533 6.066499,8.37595 3.44956,12.85892 -2.616939,4.48286 -8.445488,6.01662 -12.965518,3.4212 -0.594772,-0.35389 -1.07057,-0.70788 -1.546469,-1.17977 -0.237848,-0.118 -0.237848,-0.47189 0,-0.58988 l 0.23795,-0.23589 c 0.118974,-0.118 0.475798,-0.236 0.594772,0 3.330585,2.94921 8.564362,2.71331 11.538124,-0.58989 2.973762,-3.3033 2.735813,-8.49394 -0.594772,-11.44325 -3.330585,-2.94932 -8.564362,-2.71332 -11.538124,0.58988 -0.475798,0.47188 -0.832722,1.06167 -1.189546,1.65155 h 4.401156 c 0.23795,0 0.475899,0.23589 0.475899,0.47189 v 0.35388 c 0,0.236 -0.237949,0.47199 -0.475899,0.47199 h -6.185372 c -0.237849,0 -0.475798,-0.23599 -0.475798,-0.47199 v -6.13451 c 0,-0.23589 0.237949,-0.47189 0.475798,-0.47189 z"
                            id="path18" />
                        <path
                            d="m 42.428636,135.64555 c -0.100826,0 -0.302478,0 -0.403304,-0.1 l -5.142126,-5.09985 c -0.201652,-0.19999 -0.201652,-0.49998 0,-0.69998 0.201652,-0.19999 0.50413,-0.19999 0.705782,0 l 5.142126,5.09985 c 0.201652,0.19999 0.201652,0.49999 0,0.69998 -0.100826,0 -0.201652,0.1 -0.302478,0.1 z"
                            id="path19" />
                        <path
                            d="m 37.185684,135.64555 c -0.100826,0 -0.302478,0 -0.403304,-0.1 -0.201652,-0.19999 -0.201652,-0.49999 0,-0.69998 l 5.142126,-5.09985 c 0.201652,-0.19999 0.50413,-0.19999 0.705782,0 0.201652,0.2 0.201652,0.49999 0,0.69998 l -5.142126,5.09985 c 0,0 -0.100826,0.1 -0.302478,0.1 z"
                            id="path20" />
                    </g>
                </g>
                <g stroke="#707070" fill="none" strokeWidth="0.265"
                    transform="matrix(3.81076,0,0,3.77942,0.504,0.79)">
                    <circle cx="15.875" cy="15.875" r="7.9380002" strokeLinecap="round" strokeLinejoin="round"
                        strokeMiterlimit="4" id="circle21" />
                    <circle cx="15.875" cy="15.875" r="15.875" strokeLinecap="round" strokeLinejoin="round"
                        strokeMiterlimit="4" id="circle22" />
                    <path
                        d="m 15.875,38.68583 h 9.476 c 1.91,0 1.733,-2.043964 1.733,-2.043964 L 27.1,27.1 M 15.875,38.68583 H 6.399 c -1.91,0 -1.733,-2.043964 -1.733,-2.043964 L 4.65,27.1 M 7.937,15.875 H 23.812 M 21.488,21.488 27.1,27.1 M 21.488,10.262 27.1,4.65 M 10.262,21.488 4.65,27.1 M 10.262,10.262 4.65,4.65 m 11.225,27.1 v 6.93583"
                        strokeLinecap="butt" strokeLinejoin="miter" id="path22" />
                </g>
            </svg>
        </div >
    )
};

//   const filenameToUrl = modelUrls.reduce((acc, url) => {
//     const filename = url.split('/').pop();
//     acc[filename] = url;
//     return acc;
//   }, {});


//   // #region Controls
//   const filenames = Object.keys(filenameToUrl);
//   useControls("Model", {
//     File: {
//       options: filenames,
//       value: modelUrl.split('/').pop(),
//       onChange: (filename) => setModelUrl(filenameToUrl[filename])
//     }
//   });